#+CONSTANTS: oldFTP=260
#+CONSTANTS: currentFTP=265

** General Build
   
*** Week 0

 | Day | Type | Set   |     | SubSet | SubSet Ins | Rest | Instruction                  |
 |-----+------+-------+-----+--------+------------+------+------------------------------|
 |   0 | FTP  | NA    |     | -      | -          | -    | -                            |
 |   1 | UDF  | NA    |   - | -      | -          | -    | 90m                          |
 |   2 | INT  | 7x5m  | 286 | -      | -          | 5m   | Constant                     |
 |   3 | UDF  | NA    |   - | -      | -          | -    | 75m                          |
 |   4 | INT  | 6x9m  | @R6 | 3x3m   |            | 6m   | 1 (easy)+ 1 (full) +1 (easy) |
 |     |      |       |     |        | 252        | -    | See problem to solve         |
 |     |      |       |     |        | 262        | -    |                              |
 |     |      |       |     |        | 265        | -    |                              |
 |   5 | INT  | 3x20m |   - | -      | -          | 15m  | Inbetween set diff           |
 |     |      |       | 233 |        |            |      |                              |
 |     |      |       | 244 |        |            |      |                              |
 |     |      |       | 236 |        |            |      |                              |
 #+TBLFM: @4$4=$currentFTP * 1.08;%.0f
 #+TBLFM: @8$4=$currentFTP * 0.88;%.0f
 #+TBLFM: @9$4=$currentFTP * 0.92;%.0f
 #+TBLFM: @10$4=$currentFTP * 0.89;%.0f
 #+TBLFM: @7$6=$currentFTP * 0.95;%.0f
 #+TBLFM: @8$6=$currentFTP * (1.1 -0.95) / 4 + $currentFTP * 0.95;%.0f
 #+TBLFM: @9$6=$currentFTP * (1.1 -0.95) / 3 + $currentFTP * 0.95;%.0f

*** Week 1

 | Day | Type | Set   | Exe          | Target (Watts) | Target (HR) | Rest      | Instruction |
 |-----+------+-------+--------------+----------------+-------------+-----------+-------------|
 |   0 | INT  | 3x15m | 3+3+3        |                |        185+ | R@6m;r@3m | Max Power   |
 |   1 | SPR  | 3     | 20s          |                |        195+ |           |             |
 |   2 | INT  | 8x5m  |              |                |        180+ | R@5m      |             |
 |   3 | UDF  | NA    | 60m          |                |        155+ | -         | Rest        |
 |   4 | INT  | 3x20m | 5*(1+3(qua)) |                |         180 | R@10@     |             |

*** FTP test 

**** test matrix
     
     | set         | time | Power |
     |-------------+------+-------|
     | 0 warm-up   | 10m  |   260 |
     | 1 wapr-up+  | 5m   |       |
     | --> 1.1     | 1m   |   260 |
     | --> 1.2     | 1m   |   130 |
     | --> 1.3     | 1m   |   275 |
     | --> 1.4     | 1m   |   130 |
     | --> 1.5     | 1m   |   280 |
     | 2 rest      | 5m   |       |
     | 3 de-       | 5m   |  286. |
     | 4 rest      | 5m   |       |
     | 5 test      | 20m  |       |
     | 6 cool down | 5m   |       |
     #+TBLFM: $3=$oldFTP +15::@4$3=$oldFTP::@5$3=130::@7$3=130::@8$3=$oldFTP + 20::@10$3=$oldFTP * 1.1
     

** problem to solve

   Fang Mountain +3, i.e. Week 0 Day 4

          1.1
         /\
        /  \
   ----/    \

   .95       .95
   
   Each of the sub-set consists 3 subsections. In subsection, it is a
   3 minutes period. However, the power is not a constant during this
   period. Another issue is that the power meter shows the average
   power, so a conversion must be applied.

   - use interval timer to record 3 mins as a whole

     The best method is to tell the user for the next 20 second,
     what is the target power.

*** solution to this tri issue


         /
   -----/- 
   ----/ | 

    At the end of the first part power goes up:

    ( the average power from the begining of power ) * 2
    
       = ( power difference between the top and the bottom ) * 1 * 1/2 
   
    Using the area priciple, i.e. the area of triangle equals to the
    rectangle.

    So the power target at the end of that peak should be:

    target power = ( 1.1 - 0.95 ) * .95 / 4

    This will tell the user that s/he should put the target power for
    next 20 seconds. So, s/he would have 3 check points during the
    power surge.

    Therefore, the following section, i.e. the power down-ward period,
    the user should have a target number:

    target power = ( 1.1 - 0.95 ) * .95 / 3
